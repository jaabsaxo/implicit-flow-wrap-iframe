<!DOCTYPE HTML>    
<html>    
<head>
</head>
<body>

<script type="text/javascript">

var TotalTime = 0;
var Clock = setInterval(function() {
    TotalTime = TotalTime + 1;
    document.getElementById("TotalTime").innerHTML = "Total Runtime: " + TotalTime;
}, 1000);

function login() {
  const client_id = "add82f2f69d340249024017f2194adac";
  const stateString = "State" + Math.random().toString();
  const redirectUrl = "https://jaabsaxo.github.io/implicit-flow-wrap-iframe/";
  const url = "https://sim.logonvalidation.net/authorize?response_type=token&client_id="+client_id+"&state="+stateString+"&redirect_uri="+redirectUrl;

  const options = {
    method: 'GET',
    mode: 'no-cors',
    redirect: 'follow'
  };
  console.log("log in..");
  window.open(url, '_self');
}

window.addEventListener("message", (event) => {
  console.log("message received", event.data);
}, false);


var accessToken = "";

</script>

<h3>Main page: v0.0.7</h3>
<iframe id="iframeid" src="https://jaabsaxo.github.io/implicit-flow-test/">
</iframe>

<button onclick="login()">Login</button>
<p id="TotalTime"></p>

</body>
</html>